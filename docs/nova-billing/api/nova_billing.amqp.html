
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The nova_billing.amqp Module &mdash; nova-billing v0.0.2 documentation</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-dropdown.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-scrollspy.js"></script>
    <link rel="top" title="nova-billing v0.0.2 documentation" href="../index.html" />
    <link rel="up" title="Nova Billing Modules" href="autoindex.html" />
    <link rel="next" title="The nova_billing.db.sqlalchemy.api Module" href="nova_billing.db.sqlalchemy.api.html" />
    <link rel="prev" title="Nova Billing Modules" href="autoindex.html" />
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($span, minLevel) {
    var $tocList = $("<ul/>").attr('class', "dropdown-menu"),
      findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 10 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          // Add list element.
          $tocList.append($("<li/>").append($item));
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    // Start construction and return.
    findA($span);

    // Wipe out old list and patch in new one.
    return $span.empty("ul").append($tocList);
  };

  $(document).ready(function () {
    // Patch the global and local TOC's to be bootstrap-compliant.
    patchToc($("span.globaltoc"), 1);
    patchToc($("span.localtoc"), 2);

    // Activate.
    $('#topbar').dropdown();
  });
}());
</script>

  </head>
  <body>
  <div class="topbar" data-scrollspy="scrollspy" >
    <div class="topbar-inner">
      <div class="container">
        <a class="brand" href="../index.html">nova-billing v0.0.2 documentation</a>
        <ul class="nav">
          
            <li class="dropdown" data-dropdown="dropdown">
  <a href="../index.html"
     class="dropdown-toggle">Site</a>
  <span class="globaltoc"><ul class="simple">
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../devref/index.html">Developer Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restapi.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
</ul>
</span>
</li>
            
          
          
            
  <li><a href="autoindex.html"
         title="Previous Chapter: Nova Billing Modules">&laquo; Nova Billing Mod...</a></li>
  <li><a href="nova_billing.db.sqlalchemy.api.html"
         title="Next Chapter: The nova_billing.db.sqlalchemy.api Module">The nova_billing... &raquo;</a></li>
          
          
            
          
        </ul>
        <ul class="nav secondary-nav">
          
            
<form class="pull-left" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </ul>
      </div>
    </div>
  </div>

<div class="container">
   
  <div class="section" id="module-nova_billing.amqp">
<span id="the-nova-billing-amqp-module"></span><h1>The nova_billing.amqp Module<a class="headerlink" href="#module-nova_billing.amqp" title="Permalink to this headline">¶</a></h1>
<p>AMQP listener</p>
<dl class="class">
<dt id="nova_billing.amqp.Service">
<em class="property">class </em><tt class="descclassname">nova_billing.amqp.</tt><tt class="descname">Service</tt><a class="headerlink" href="#nova_billing.amqp.Service" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Class of AMQP listening service.
Usually this service starts at the beginning of the billing daemon
and starts listening immediately. In case of connection errors
reconnection attempts will be made periodically.</p>
<p>The service listens for <tt class="docutils literal"><span class="pre">compute.#</span></tt> routing keys.</p>
<dl class="method">
<dt id="nova_billing.amqp.Service.consume">
<tt class="descname">consume</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Get messages in an infinite loop. This is the main function of service&#8217;s green thread.</p>
</dd></dl>

<dl class="method">
<dt id="nova_billing.amqp.Service.get_event_datetime">
<tt class="descname">get_event_datetime</tt><big>(</big><em>body</em><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.get_event_datetime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.amqp.Service.process_event">
<tt class="descname">process_event</tt><big>(</big><em>body</em>, <em>message</em><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.process_event" title="Permalink to this definition">¶</a></dt>
<dd><p>This function analyzes <tt class="docutils literal"><span class="pre">body</span></tt> and saves
event information to the database.</p>
</dd></dl>

<dl class="method">
<dt id="nova_billing.amqp.Service.process_message">
<tt class="descname">process_message</tt><big>(</big><em>body</em>, <em>message</em><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.process_message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.amqp.Service.reconnect">
<tt class="descname">reconnect</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.reconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.amqp.Service.start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.amqp.Service.stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.amqp.Service.wait">
<tt class="descname">wait</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.amqp.Service.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>
        &copy; Copyright 2011, Alessio Ababilov, Ivan Kolodyazhny (GridDynamics Openstack Core Team).<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>